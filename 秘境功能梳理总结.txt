================================================================================
                        ç§˜å¢ƒåŠŸèƒ½æ¢³ç†æ€»ç»“
================================================================================

é¡¹ç›®: ä¿®ä»™æ¸¸æˆ (xiuxian-go)
åŠŸèƒ½: ç§˜å¢ƒæ¢ç´¢ (Dungeon Roguelikeç³»ç»Ÿ)
æ¢³ç†æ—¶é—´: 2025-12-14
æ¢³ç†èŒƒå›´: Dungeon.vue / dungeon.js / combat.js / dungeonBuffs.js

================================================================================
1. åŠŸèƒ½æ¦‚è¿°
================================================================================

ç§˜å¢ƒæ˜¯ä¸€ä¸ªç±»Roguelikeçš„åŠ¨æ€æˆ˜æ–—ç³»ç»Ÿï¼Œé‡‡ç”¨"å¢ç›Šé€‰æ‹© â†’ æˆ˜æ–— â†’ ä¸‹ä¸€å±‚"çš„å¾ªç¯æµç¨‹ã€‚
ç©å®¶é€šè¿‡4ä¸ªéš¾åº¦çº§åˆ«æŒ‘æˆ˜ï¼Œåœ¨æ¯å±‚é€‰æ‹©3ä¸ªå¢ç›Šæ•ˆæœï¼ˆæ™®é€š/ç¨€æœ‰/å²è¯—ï¼‰æ¥å¼ºåŒ–å±æ€§ï¼Œ
ç„¶åä¸æ•Œäººè¿›è¡Œå®æ—¶æˆ˜æ–—ã€‚æ‰€æœ‰è®¡ç®—åœ¨å‰ç«¯è¿›è¡Œï¼Œä½¿ç”¨Web Workeré¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚

æ ¸å¿ƒç‰¹ç‚¹:
âœ… 4ä¸ªéš¾åº¦ç­‰çº§åŠ¨æ€è°ƒæ•´æ•Œäººå¼ºåº¦
âœ… 20ä¸ªå“è´¨ä¸åŒçš„å¢ç›Šé€‰é¡¹
âœ… å®Œæ•´çš„æˆ˜æ–—ç³»ç»Ÿ(æš´å‡»/è¿å‡»/å¸è¡€/çœ©æ™•/åå‡»)
âœ… å®æ—¶æˆ˜æ–—åŠ¨ç”»å’Œè¯¦ç»†æ—¥å¿—
âœ… æ•°æ®ç»Ÿè®¡(å‡»æ€æ•°/æ­»äº¡æ•°/å¥–åŠ±ç»Ÿè®¡)
âœ… Web Workerå¼‚æ­¥è®¡ç®—ï¼Œä¸é˜»å¡UI

================================================================================
2. ç³»ç»Ÿæ¶æ„
================================================================================

â”Œâ”€ å‰ç«¯è¡¨ç°å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dungeon.vue (926è¡Œ)                              â”‚
â”‚ - UIå±•ç¤º (éš¾åº¦é€‰æ‹©ã€å¢ç›Šå¡ã€æˆ˜æ–—ç•Œé¢ã€å±æ€§é¢æ¿) â”‚
â”‚ - çŠ¶æ€ç®¡ç† (dungeonState, playerStats, etc.)    â”‚
â”‚ - äº‹ä»¶å¤„ç† (é€‰æ‹©å¢ç›Šã€è¿›å…¥æˆ˜æ–—ã€ç»“æŸå¤„ç†)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ è°ƒç”¨
â”Œâ”€ ä¸šåŠ¡é€»è¾‘å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ dungeon.js (285è¡Œ)                               â”‚
â”‚ - å¢ç›Šé€‰é¡¹é…ç½® (20ä¸ªå¢ç›Š)                       â”‚
â”‚ - éš¾åº¦ä¿®é¥°ç¬¦ (4ä¸ªéš¾åº¦)                          â”‚
â”‚ - é€‰é¡¹ç”Ÿæˆç®—æ³• (æ¦‚ç‡åŠ æƒ)                       â”‚
â”‚                                                  â”‚
â”‚ combat.js (361è¡Œ)                                â”‚
â”‚ - æˆ˜æ–—ç³»ç»Ÿæ ¸å¿ƒ (CombatManager)                  â”‚
â”‚ - å±æ€§è®¡ç®— (CombatStats)                        â”‚
â”‚ - ä¼¤å®³å…¬å¼ (æš´å‡»/è¿å‡»/å¸è¡€ç­‰)                   â”‚
â”‚ - æ•Œäººç”Ÿæˆ (generateEnemy)                      â”‚
â”‚                                                  â”‚
â”‚ dungeonBuffs.js (53è¡Œ)                           â”‚
â”‚ - å¢ç›Šç®¡ç†å™¨ (å¯é€‰)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ é€šè¿‡Workeré€šä¿¡
â”Œâ”€ Web Workeråå°è®¡ç®— â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ exploration.js (éœ€è¦æŸ¥è¯)                        â”‚
â”‚ - æˆ˜æ–—å¾ªç¯è®¡ç®— (100å›åˆæˆ–ç»“æŸ)                  â”‚
â”‚ - æ¯å›åˆä¼¤å®³/å—ä¼¤å¤„ç†                           â”‚
â”‚ - è¿”å›æˆ˜æ–—ç»“æœå’Œæ—¥å¿—                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ•°æ®æµå‘:
ç©å®¶æ“ä½œ â†’ Dungeon.vue â†’ é€‰é¡¹ç”Ÿæˆ/æˆ˜æ–—åˆ›å»º â†’ Workerè®¡ç®— â†’ ç»“æœå›è°ƒ â†’ UIæ›´æ–°

================================================================================
3. æ ¸å¿ƒæ•°æ®ç»“æ„
================================================================================

3.1 ç§˜å¢ƒçŠ¶æ€ (dungeonState)
{
  floor: 1,              // å½“å‰å±‚æ•° (1-âˆ)
  inCombat: false,       // æ˜¯å¦åœ¨æˆ˜æ–—ä¸­
  showingOptions: false, // æ˜¯å¦æ˜¾ç¤ºå¢ç›Šé€‰é¡¹
  currentOptions: [],    // å½“å‰3ä¸ªå¢ç›Šé€‰é¡¹
  combatManager: null    // æˆ˜æ–—ç®¡ç†å™¨å®ä¾‹
}

3.2 ç©å®¶å±æ€§ (playerStats computed)
{
  // åŸºç¡€å±æ€§ (5ä¸ª)
  attack: number,
  defense: number,
  health: number,
  speed: number,
  
  // æˆ˜æ–—å±æ€§ (6ä¸ª) - ç™¾åˆ†æ¯”
  critRate,       // æš´å‡»ç‡ (default: 5%)
  comboRate,      // è¿å‡»ç‡
  counterRate,    // åå‡»ç‡
  stunRate,       // çœ©æ™•ç‡
  dodgeRate,      // é—ªé¿ç‡ (default: 5%)
  vampireRate,    // å¸è¡€ç‡
  
  // æˆ˜æ–—æŠ—æ€§ (6ä¸ª) - ç™¾åˆ†æ¯”
  critResist,
  comboResist,
  counterResist,
  stunResist,
  dodgeResist,
  vampireResist,
  
  // ç‰¹æ®Šå±æ€§ (7ä¸ª) - ç™¾åˆ†æ¯”
  healBoost,
  critDamageBoost,        // default: 50%
  critDamageReduce,
  finalDamageBoost,
  finalDamageReduce,
  combatBoost,            // æˆ˜æ–—å±æ€§å€æ•°
  resistanceBoost         // æŠ—æ€§å€æ•°
}

3.3 å¢ç›Šé€‰é¡¹ç»“æ„
{
  id: string,              // å”¯ä¸€æ ‡è¯†
  name: string,            // åç§° (å¦‚"æé™çªç ´")
  description: string,     // æè¿°
  type: 'common'|'rare'|'epic',  // å“è´¨
  effect: (player) => void  // æ•ˆæœå‡½æ•°
}

3.4 æˆ˜æ–—ç³»ç»Ÿæ•°æ®ç»“æ„

CombatManager {
  player: CombatEntity,      // ç©å®¶å®ä½“
  enemy: CombatEntity,       // æ•Œäººå®ä½“
  type: CombatType,          // æˆ˜æ–—ç±»å‹
  state: CombatState,        // æˆ˜æ–—çŠ¶æ€
  round: number,             // å½“å‰å›åˆ (1-100)
  maxRounds: 100,            // æœ€å¤§å›åˆæ•°
  log: string[]              // æˆ˜æ–—æ—¥å¿—
}

CombatEntity {
  name: string,              // è§’è‰²åå­—
  level: number,             // ç­‰çº§
  realm: string,             // å¢ƒç•Œ
  stats: CombatStats,        // å±æ€§
  currentHealth: number,     // å½“å‰è¡€é‡
  effects: Array             // çŠ¶æ€æ•ˆæœ
}

================================================================================
4. æ ¸å¿ƒç®—æ³•
================================================================================

4.1 ä¼¤å®³è®¡ç®—æµç¨‹

åŸå§‹ä¼¤å®³ = damage * (1 + combatBoost)

æš´å‡»åˆ¤å®š:
  - æœ‰æ•ˆæš´å‡»ç‡ = max(0, min(0.8,
      critRate * (1 + combatBoost) - target.critResist * (1 + target.resistanceBoost)
    ))
  - è§¦å‘: ä¼¤å®³ *= (1.5 + critDamageBoost)

è¿å‡»åˆ¤å®š:
  - æœ‰æ•ˆè¿å‡»ç‡ = max(0, min(0.8, comboRate * (1 + combatBoost) - target.comboResist))
  - è§¦å‘: ä¼¤å®³ *= 1.3

å¸è¡€åˆ¤å®š:
  - æœ‰æ•ˆå¸è¡€ç‡ = max(0, min(0.8, vampireRate * (1 + combatBoost) - target.vampireResist))
  - è§¦å‘: æ”»å‡»è€…å›å¤ = ä¼¤å®³ * 30%

çœ©æ™•åˆ¤å®š:
  - æœ‰æ•ˆçœ©æ™•ç‡ = max(0, min(0.8, stunRate * (1 + combatBoost) - target.stunResist))
  - è§¦å‘: ç›®æ ‡ä¸‹å›åˆæ— æ³•è¡ŒåŠ¨

æœ€ç»ˆä¼¤å®³ = ä¼¤å®³ * (1 + finalDamageBoost)

4.2 ä¼¤å®³å‡å…

å—åˆ°ä¼¤å®³ = ä¼¤å®³ * 100 / (100 + defense * (1 + combatBoost))

å¦‚æœæ˜¯æš´å‡»: ä¼¤å®³ *= (1 - critDamageReduce)
æœ€ç»ˆå‡ä¼¤: ä¼¤å®³ *= (1 - finalDamageReduce)

4.3 æˆ˜æ–—æµç¨‹ (ä¸€å›åˆ)

1. æ¯”è¾ƒspeed â†’ ç¡®å®šå…ˆæ‰‹å’Œåæ‰‹
2. å…ˆæ‰‹æ”»å‡»:
   - calculateDamage(åæ‰‹) â†’ è·å¾—ä¼¤å®³åŠç‰¹æ•ˆä¿¡æ¯
   - åæ‰‹takeDamage() â†’ åº”ç”¨ä¼¤å®³å’Œç‰¹æ•ˆ
   - è®°å½•æ—¥å¿—
   - æ£€æŸ¥æ˜¯å¦æ­»äº¡ â†’ æˆ˜æ–—ç»“æŸ
3. åæ‰‹æ”»å‡» (å¦‚æœªè¢«çœ©æ™•):
   - æ£€æŸ¥åå‡» (counterRate)
   - calculateDamage(å…ˆæ‰‹)
   - å…ˆæ‰‹takeDamage()
   - è®°å½•æ—¥å¿—
   - æ£€æŸ¥æ˜¯å¦æ­»äº¡ â†’ æˆ˜æ–—ç»“æŸ
4. å›åˆæ•°++ â†’ å¦‚è¶…è¿‡100 â†’ æˆ˜æ–—å¤±è´¥

4.4 æ•Œäººå±æ€§è®¡ç®—

baseHealth = 100 + difficulty * level * 200
baseDamage = 8 + difficulty * level * 2
baseDefense = 3 + difficulty * level * 2
baseSpeed = 5 + difficulty * level * 2

ç™¾åˆ†æ¯”å±æ€§ = åŸºç¡€ + difficulty * level * ç³»æ•°

æ ¹æ®ç±»å‹è°ƒæ•´:
- NORMAL: Ã—1
- ELITE: ç™¾åˆ†æ¯”Ã—1.3(ä¸Šé™80%), æ•°å€¼Ã—1.5
- BOSS: ç™¾åˆ†æ¯”Ã—1.5(ä¸Šé™90%), æ•°å€¼Ã—2

4.5 å¢ç›Šé€‰é¡¹ç”Ÿæˆ

åŸºç¡€æ¦‚ç‡:
  commonChance = 0.70
  rareChance = 0.25
  epicChance = 0.05

æ¯5å±‚æé«˜ç¨€æœ‰æ¦‚ç‡:
  commonChance = 0.50
  rareChance = 0.35
  epicChance = 0.15

æ¯10å±‚æé«˜å²è¯—æ¦‚ç‡:
  commonChance = 0.50
  rareChance = 0.30
  epicChance = 0.20

ç”Ÿæˆç®—æ³•:
  while (selected.length < 3) {
    éšæœºé€‰æ‹©å“è´¨æ± 
    ä»æ± ä¸­è¿‡æ»¤æœªä½¿ç”¨çš„å¢ç›Š
    æ·»åŠ åˆ°selected
    æ ‡è®°IDä¸ºå·²ä½¿ç”¨
  }

================================================================================
5. å¢ç›Šé€‰é¡¹è¯¦ç»†æ¸…å•
================================================================================

æ™®é€šå“è´¨ (8ä¸ª) - 1-2%æå‡:
1. heal                - æ°”è¡€å¢åŠ  (health Ã— 1.1)
2. small_buff          - å°å¹…å¼ºåŒ– (finalDamageBoost += 0.1)
3. defense_boost       - é“å£ (defense Ã— 1.2)
4. speed_boost         - ç–¾é£ (speed Ã— 1.15)
5. crit_boost          - ä¼šå¿ƒ (critRate += 0.15)
6. dodge_boost         - è½»èº« (dodgeRate += 0.15)
7. vampire_boost       - å¸è¡€ (vampireRate += 0.1)
8. combat_boost        - æˆ˜æ„ (combatBoost += 0.1)

ç¨€æœ‰å“è´¨ (6ä¸ª) - 5-10%æå‡:
1. defense_master      - é˜²å¾¡å¤§å¸ˆ (defense Ã— 1.1)
2. crit_mastery        - ä¼šå¿ƒç²¾é€š (critRate+10%, çˆ†ä¼¤+20%)
3. dodge_master        - æ— å½± (dodgeRate += 0.1)
4. combo_master        - è¿å‡»ç²¾é€š (comboRate += 0.1)
5. vampire_master      - è¡€é­” (vampireRate += 0.05)
6. stun_master         - éœ‡æ…‘ (stunRate += 0.05)

å²è¯—å“è´¨ (6ä¸ª) - 20-50%æå‡:
1. ultimate_power      - æé™çªç ´ (combatBoost += 0.5)
2. divine_protection   - å¤©é“åº‡æŠ¤ (finalDamageReduce += 0.3)
3. combat_master       - æˆ˜æ–—å¤§å¸ˆ (combatBoost+25%, resistanceBoost+25%)
4. immortal_body       - ä¸æœ½ä¹‹èº¯ (maxHealthÃ—2, finalDamageReduce+20%)
5. celestial_might     - å¤©äººåˆä¸€ (combatBoost+40%, maxHealthÃ—1.5)
6. battle_sage_supreme - æˆ˜åœ£è‡³å°Š (critRate+40%, critDamageBoost+80%, finalDamageBoost+20%)

================================================================================
6. éš¾åº¦ç³»ç»Ÿ
================================================================================

4ä¸ªéš¾åº¦ç­‰çº§:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éš¾åº¦        â”‚ å€¼        â”‚ ç”Ÿå‘½å€ç‡ â”‚ ä¼¤å®³å€ç‡ â”‚ å¥–åŠ±å€ç‡ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å‡¡ç•Œ (æ˜“)   â”‚ 'easy'    â”‚ 0.8      â”‚ 0.8      â”‚ 0.8      â”‚
â”‚ å°ä¸–ç•Œ(æ™®é€š)â”‚ 'normal'  â”‚ 1.0      â”‚ 1.0      â”‚ 1.0      â”‚
â”‚ çµç•Œ (å›°éš¾) â”‚ 'hard'    â”‚ 1.2      â”‚ 1.2      â”‚ 1.5      â”‚
â”‚ ä»™ç•Œ (ä¸“å®¶) â”‚ 'expert'  â”‚ 1.5      â”‚ 1.5      â”‚ 2.0      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ•Œäººå±æ€§ = åŸºç¡€ * éš¾åº¦å€ç‡ * (1 + floor * 0.05)

éš¾åº¦å½±å“:
- æ•Œäººè¡€é‡: è¶Šéš¾è¶Šé«˜
- æ•Œäººä¼¤å®³: è¶Šéš¾è¶Šé«˜
- è·å¾—å¥–åŠ±: éš¾åº¦è¶Šé«˜å¥–åŠ±è¶Šå¤š
- æ•Œäººç±»å‹: éš¾åº¦å½±å“æ˜¯å¦å‡ºç°Elite/Boss

================================================================================
7. æ¸¸æˆæµç¨‹
================================================================================

å®Œæ•´æµç¨‹:

1. é€‰æ‹©éš¾åº¦
   â†“
2. æ˜¾ç¤ºå¢ç›Šé€‰é¡¹ (3ä¸ª)
   â†“
3. ç©å®¶é€‰æ‹©å¢ç›Š (æˆ–åˆ·æ–°, æœ€å¤š3æ¬¡)
   â†“
4. åº”ç”¨å¢ç›Šæ•ˆæœåˆ°playerStats
   â†“
5. å±‚æ•°+1
   â†“
6. ç”Ÿæˆæ•Œäºº (åŸºäºå±‚æ•°+éš¾åº¦)
   â†“
7. è¿›å…¥æˆ˜æ–— (åˆ›å»ºCombatManager)
   â†“
8. Web Workeræ‰§è¡Œæˆ˜æ–—å¾ªç¯ (æœ€å¤š100å›åˆ)
   â”œâ”€ æ¯å›åˆ: ä¼¤å®³è®¡ç®— â†’ åº”ç”¨ä¼¤å®³ â†’ æ£€æŸ¥æ­»äº¡
   â”œâ”€ è¶…è¿‡100å›åˆ â†’ å¤±è´¥
   â””â”€ ä¸€æ–¹æ­»äº¡ â†’ èƒœåˆ©/å¤±è´¥
   â†“
9. æˆ˜æ–—ç»“æŸ
   â”œâ”€ èƒœåˆ©: è·å¾—å¥–åŠ± â†’ å›åˆ°æ­¥éª¤2 (ç»§ç»­ä¸‹ä¸€å±‚)
   â””â”€ å¤±è´¥: ç§˜å¢ƒç»“æŸ, è®°å½•ç»Ÿè®¡

================================================================================
8. å‰åç«¯åˆ†å·¥
================================================================================

å½“å‰æ¶æ„ (å®Œå…¨å‰ç«¯):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŠŸèƒ½            â”‚ å®ç°ä½ç½®                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¢ç›Šé€‰æ‹©        â”‚ Dungeon.vue (UI) + dungeon.jsâ”‚
â”‚ æˆ˜æ–—è®¡ç®—        â”‚ combat.js + Worker           â”‚
â”‚ å±æ€§ç®¡ç†        â”‚ playerInfoStore (Pinia)      â”‚
â”‚ æ•°æ®æŒä¹…åŒ–      â”‚ persistenceStore (LocalSto)  â”‚
â”‚ æ•Œäººç”Ÿæˆ        â”‚ combat.js (generateEnemy)    â”‚
â”‚ RNG             â”‚ Math.random() (å®¢æˆ·ç«¯)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åç«¯æ”¹é€ æ–¹å‘ (å»ºè®®):
[ ] RNGåç«¯åŒ– (Goå®ç°random)
[ ] æˆ˜æ–—è®¡ç®—åç«¯åŒ– (ç¡®ä¿å…¬å¹³æ€§)
[ ] å¢ç›Šé€‰æ‹©åç«¯åŒ– (åŒæ­¥ç§å­)
[ ] æˆç»©ä¿å­˜è‡³æ•°æ®åº“
[ ] æ’è¡Œæ¦œåŠŸèƒ½
[ ] æˆå°±ç³»ç»Ÿ

================================================================================
9. ä»£ç ç»Ÿè®¡
================================================================================

æ–‡ä»¶ç»Ÿè®¡:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–‡ä»¶             â”‚ è¡Œæ•° â”‚ ä¸»è¦åŠŸèƒ½           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Dungeon.vue      â”‚ 926  â”‚ UI + çŠ¶æ€ç®¡ç†      â”‚
â”‚ dungeon.js       â”‚ 285  â”‚ å¢ç›Šé…ç½®ä¸ç”Ÿæˆ     â”‚
â”‚ combat.js        â”‚ 361  â”‚ æˆ˜æ–—æ ¸å¿ƒé€»è¾‘       â”‚
â”‚ dungeonBuffs.js  â”‚ 53   â”‚ å¢ç›Šç®¡ç†å™¨(å¯é€‰)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ€»è®¡             â”‚ 1625 â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ–¹æ³•ç»Ÿè®¡ (Dungeon.vue):
- startDungeon(): åˆå§‹åŒ–ç§˜å¢ƒ
- generateOptions(): ç”Ÿæˆå¢ç›Šé€‰é¡¹
- selectOption(): é€‰æ‹©å¢ç›Š
- handleRefreshOptions(): åˆ·æ–°é€‰é¡¹
- startBattle(): å¯åŠ¨Workeræˆ˜æ–—
- finishBattle(): å¤„ç†æˆ˜æ–—ç»“æœ
- gainBattleReward(): è·å¾—å¥–åŠ±
- flee(): é€ƒè·‘
- getOptionColor(): è·å–å“è´¨é¢œè‰²
- infoCliclk(): æŸ¥çœ‹å±æ€§è¯¦æƒ…

================================================================================
10. å·²çŸ¥é—®é¢˜ä¸æ”¹è¿›å»ºè®®
================================================================================

å·²çŸ¥é—®é¢˜:
1. å±æ€§çˆ†ç‚¸: å¤šä¸ªå²è¯—å¢ç›Šå åŠ å¯¼è‡´å±æ€§æ— é™é«˜
   â†’ å»ºè®®: æ·»åŠ å±æ€§ä¸Šé™ (healthâ‰¤10å€, damageâ‰¤5å€, etc.)

2. éš¾åº¦å¹³è¡¡: é«˜éš¾åº¦æ•Œäººä»å¯èƒ½è¢«ç§’æ€
   â†’ åŸå› : æ•Œäººå±æ€§å¢é•¿è·Ÿä¸ä¸Šç©å®¶å¢ç›Šå¢é•¿
   â†’ å»ºè®®: è°ƒæ•´æ•Œäººå±æ€§å¢é•¿æ›²çº¿

3. RNGä¸å…¬å¹³: Math.random()å®Œå…¨å®¢æˆ·ç«¯
   â†’ é£é™©: ç©å®¶å¯ä¿®æ”¹JSè¿›è¡Œä½œå¼Š
   â†’ å»ºè®®: Goåç«¯ç”ŸæˆRNGç§å­

4. æ— è´Ÿé¢å¢ç›Š: æ‰€æœ‰å¢ç›Šéƒ½æ˜¯æ­£å‘
   â†’ é—®é¢˜: ç¼ºä¹é€‰æ‹©å›°éš¾
   â†’ å»ºè®®: æ·»åŠ debuff (å‡ä¼¤å®³ã€é™é€Ÿç­‰)

5. Web Workerå¼•ç”¨: ä½¿ç”¨exploration.jsè€Œéä¸“å±worker
   â†’ é—®é¢˜: å¯èƒ½å¯¼è‡´é€»è¾‘æ··ä¹±
   â†’ å»ºè®®: åˆ›å»ºdungeon-worker.jsä¸“å±æ–‡ä»¶

æ”¹è¿›æ–¹æ¡ˆ:

çŸ­æœŸ (1-2å‘¨):
â–¡ æ·»åŠ å±æ€§ä¸Šé™é™åˆ¶
â–¡ ä¿®å¤éš¾åº¦ç³»æ•°æ˜ å°„ (string â†’ difficultyModifiers)
â–¡ æ·»åŠ è´Ÿé¢å¢ç›Š (3-5ä¸ª)
â–¡ ä¼˜åŒ–æ•Œäººå±æ€§å¢é•¿ (æŒ‡æ•°çº§)

ä¸­æœŸ (2-4å‘¨):
â–¡ å®ç°å¢ç›Šèˆå¼ƒæœºåˆ¶ (é€‰æ‹©å›°éš¾)
â–¡ æ·»åŠ ç‰¹æ®Šäº‹ä»¶ (å•†äººã€ä¼‘æ¯ç‚¹)
â–¡ å®ç°å¢ç›Šç»„åˆå¥–åŠ± (3ä¸ªç›¸å…³å¢ç›Š+é¢å¤–æ•ˆæœ)
â–¡ Bossç‹¬ç‰¹æŠ€èƒ½

é•¿æœŸ (1-2æœˆ):
â–¡ Goåç«¯é›†æˆ (RNG + æˆ˜æ–—è®¡ç®—)
â–¡ æˆç»©æ•°æ®åº“ä¿å­˜
â–¡ æ’è¡Œæ¦œåŠŸèƒ½
â–¡ æˆå°±ç³»ç»Ÿ
â–¡ å‰¯æœ¬éš¾åº¦åˆ†å±‚ (æ™®é€š/å›°éš¾/ç‚¼ç‹±)

================================================================================
11. ä½¿ç”¨ç¤ºä¾‹
================================================================================

åˆå§‹åŒ–ç§˜å¢ƒ:
  <Dungeon />  â† åœ¨è·¯ç”±ä¸­é…ç½®

ç”Ÿæˆå¢ç›Š:
  const options = getRandomOptions(floor)

åˆ›å»ºæˆ˜æ–—:
  const manager = new CombatManager(player, enemy)
  manager.start()
  
æ‰§è¡Œæˆ˜æ–—å›åˆ:
  while (manager.state === CombatState.IN_PROGRESS) {
    const { results, state } = manager.executeTurn()
    // æ›´æ–°UI
  }

è·å–æˆ˜æ–—æ—¥å¿—:
  const logs = manager.getCombatLog()

================================================================================
12. æ€»ç»“
================================================================================

ç§˜å¢ƒåŠŸèƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„Roguelikeæˆ˜æ–—ç³»ç»Ÿ:

âœ… å®Œæ•´æ€§: å¢ç›Šé€‰æ‹©ã€æˆ˜æ–—ç³»ç»Ÿã€ç»Ÿè®¡ç³»ç»Ÿéƒ½å·²å®ç°
âœ… åŠŸèƒ½æ€§: 4éš¾åº¦ã€20å¢ç›Šã€å®Œæ•´æˆ˜æ–—æœºåˆ¶
âœ… æ€§èƒ½: Web Workerå¼‚æ­¥è®¡ç®—ï¼Œä¸é˜»å¡UI
âœ… å¯ç©æ€§: éšæœºæ€§å¼ºï¼Œæ¯æ¬¡ä½“éªŒä¸åŒ

âš ï¸ æ”¹è¿›ç©ºé—´: å¹³è¡¡æ€§ä¸è¶³ã€RNGä¸å…¬å¹³ã€å±æ€§çˆ†ç‚¸

ğŸ¯ å‘å±•æ–¹å‘: åç«¯é›†æˆ â†’ å¢å¼ºå®‰å…¨æ€§å’Œå…¬å¹³æ€§

================================================================================
                            æ–‡æ¡£ç»“æŸ
================================================================================
