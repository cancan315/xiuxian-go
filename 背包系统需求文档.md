# 背包系统需求文档

## 1. 系统概述

背包系统是游戏中用于管理玩家所拥有物品的核心功能模块，包括装备、灵宠、丹药等各种道具的存储、查看和操作。背包系统采用前后端分离架构，所有数据存储和业务逻辑均由后端负责，前端仅负责UI展示和用户交互。

## 2. 核心功能

### 2.1 物品分类管理
- 装备类：法宝、冠巾、道袍、云履、本命法宝等
- 灵宠类：各种品质的灵宠
- 消耗品类：丹药、强化石、洗练石等

### 2.2 物品展示
- 支持按类型筛选物品
- 支持按品质排序物品
- 提供物品详细信息查看功能

### 2.3 物品操作
- 装备穿戴/卸下
- 灵宠出战/召回
- 物品出售/放生
- 装备强化/洗练

## 3. 数据结构

### 3.1 装备数据结构
- id: UUID类型，装备唯一标识符
- userId: 关联的用户ID
- equipmentId: 装备类型ID
- name: 装备名称
- type: 实体类型
- slot: 装备槽位类型
- equipType: 装备类型字段
- details: 装备详细信息(JSON)
- stats: 装备属性(JSON)
- quality: 装备品质
- enhanceLevel: 强化等级
- equipped: 是否已装备
- description: 装备描述
- requiredRealm: 装备境界要求
- level: 装备等级

### 3.2 灵宠数据结构
- id: UUID类型，灵宠唯一标识符
- userId: 关联的用户ID
- petId: 灵宠类型ID
- name: 灵宠名称
- type: 实体类型
- rarity: 稀有度等级
- level: 等级
- star: 星级
- experience: 当前经验值
- maxExperience: 升级所需的最大经验值
- quality: 品质属性
- combatAttributes: 战斗属性
- isActive: 是否为活跃状态
- power: 力量值
- upgradeItems: 升级所需物品数量
- description: 灵宠描述信息

## 4. API接口设计

### 4.1 获取玩家物品列表
- 接口地址：GET `/api/player/inventory/:userId?`
- 请求参数：
  - userId: 玩家ID（可选）
  - type: 物品类型过滤
  - quality: 物品品质过滤
- 返回数据：物品列表

### 4.2 获取物品详情
- 接口地址：GET `/api/player/inventory/details/:id`
- 请求参数：物品ID
- 返回数据：物品详细信息

## 5. 前后端职责划分

### 5.1 后端职责
- 负责所有物品数据的存储和管理
- 处理所有业务逻辑（装备穿戴、灵宠出战等）
- 提供RESTful API供前端调用
- 确保数据一致性和安全性

### 5.2 前端职责
- 展示物品信息和状态
- 处理用户交互操作
- 调用后端API执行具体操作
- 提供友好的用户界面

## 6. 注意事项

1. 所有状态管理均由后端负责，前端不应维护本地状态副本
2. 前端不应进行任何业务逻辑计算，所有计算应在后端完成
3. 所有用户操作必须通过API与后端通信，不能直接修改本地数据
4. 需要确保数据同步的一致性，避免出现数据不一致的情况