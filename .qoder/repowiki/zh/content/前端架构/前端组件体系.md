# å‰ç«¯ç»„ä»¶ä½“ç³»

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨æ–‡ä»¶**   
- [App.vue](file://src/App.vue)
- [router/index.js](file://src/router/index.js)
- [views/Cultivation.vue](file://src/views/Cultivation.vue)
- [views/Alchemy.vue](file://src/views/Alchemy.vue)
- [components/EquipmentTab.vue](file://src/components/EquipmentTab.vue)
- [components/PillsTab.vue](file://src/components/PillsTab.vue)
- [components/PetsTab.vue](file://src/components/PetsTab.vue)
- [components/LogPanel.vue](file://src/components/LogPanel.vue)
- [components/gacha/GachaMain.vue](file://src/components/gacha/GachaMain.vue)
- [components/gacha/GachaCard.vue](file://src/components/gacha/GachaCard.vue)
- [components/gacha/ResultGrid.vue](file://src/components/gacha/ResultGrid.vue)
- [components/gacha/EquipmentDetailModal.vue](file://src/components/gacha/EquipmentDetailModal.vue)
- [components/gacha/PetDetailModal.vue](file://src/components/gacha/PetDetailModal.vue)
- [stores/gacha.js](file://src/stores/gacha.js)
- [stores/inventory.js](file://src/stores/inventory.js)
</cite>

## ç›®å½•
1. [æ ¹ç»„ä»¶ä¸è·¯ç”±æ¶æ„](#æ ¹ç»„ä»¶ä¸è·¯ç”±æ¶æ„)
2. [åŠŸèƒ½æ ‡ç­¾é¡µç»„ä»¶åˆ†æ](#åŠŸèƒ½æ ‡ç­¾é¡µç»„ä»¶åˆ†æ)
3. [æ—¥å¿—é¢æ¿æœºåˆ¶](#æ—¥å¿—é¢æ¿æœºåˆ¶)
4. [æŠ½å¥–ç³»ç»Ÿç»„ä»¶æ ‘](#æŠ½å¥–ç³»ç»Ÿç»„ä»¶æ ‘)
5. [æ¨¡æ€æ¡†å¤ç”¨è®¾è®¡](#æ¨¡æ€æ¡†å¤ç”¨è®¾è®¡)
6. [æ ¸å¿ƒVueç‰¹æ€§åº”ç”¨](#æ ¸å¿ƒvueç‰¹æ€§åº”ç”¨)

## æ ¹ç»„ä»¶ä¸è·¯ç”±æ¶æ„

`App.vue`ä½œä¸ºåº”ç”¨çš„æ ¹ç»„ä»¶ï¼Œæ‰¿æ‹…ç€å…¨å±€çŠ¶æ€ç®¡ç†ã€å¸ƒå±€ç»„ç»‡å’Œå¯¼èˆªæ§åˆ¶çš„æ ¸å¿ƒèŒè´£ã€‚è¯¥ç»„ä»¶é€šè¿‡`n-layout`ç»„ä»¶æ„å»ºäº†æ ‡å‡†çš„ä¸Šä¸‹å¸ƒå±€ç»“æ„ï¼Œé¡¶éƒ¨ä¸ºåŒ…å«æ¸¸æˆæ ‡é¢˜ã€ç”¨æˆ·ä¿¡æ¯å’Œå¯¼èˆªèœå•çš„é¡µå¤´ï¼Œåº•éƒ¨ä¸ºåŠ¨æ€å†…å®¹åŒºåŸŸã€‚ç»„ä»¶é€šè¿‡`isAuthenticated`è®¡ç®—å±æ€§åˆ¤æ–­ç”¨æˆ·è®¤è¯çŠ¶æ€ï¼Œå†³å®šæ˜¯å¦æ˜¾ç¤ºä¸»åº”ç”¨ç•Œé¢æˆ–è·³è½¬è‡³ç™»å½•é¡µã€‚

åœ¨çŠ¶æ€ç®¡ç†æ–¹é¢ï¼Œ`App.vue`é›†ä¸­å¯¼å…¥å¹¶ä½¿ç”¨äº†å¤šä¸ªPiniaçŠ¶æ€å­˜å‚¨ï¼ˆå¦‚`playerInfoStore`ã€`inventoryStore`ç­‰ï¼‰ï¼Œå®ç°äº†è·¨ç»„ä»¶çš„æ•°æ®å…±äº«ã€‚ç»„ä»¶é€šè¿‡`getPlayerData`æ–¹æ³•åœ¨æŒ‚è½½æ—¶ä»åç«¯è·å–ç©å®¶æ•°æ®ï¼Œå¹¶åŒæ­¥æ›´æ–°å„storeä¸­çš„çŠ¶æ€ã€‚æ­¤å¤–ï¼Œç»„ä»¶è¿˜é›†æˆäº†WebSocketè¿æ¥ç®¡ç†ï¼Œé€šè¿‡`useWebSocket`ç»„åˆå¼å‡½æ•°å»ºç«‹ä¸æœåŠ¡å™¨çš„å®æ—¶é€šä¿¡ï¼Œç”¨äºæ¥æ”¶çµåŠ›å¢é•¿ç­‰å®æ—¶æ•°æ®ã€‚

è·¯ç”±ç³»ç»Ÿç”±`router/index.js`æ–‡ä»¶å®šä¹‰ï¼Œé‡‡ç”¨Vue Routerçš„hashæ¨¡å¼ã€‚è·¯ç”±é…ç½®ä¸­ï¼Œ`/home`è·¯å¾„é€šè¿‡`beforeEnter`å®ˆå«æ£€æŸ¥ç”¨æˆ·è®¤è¯ä»¤ç‰Œï¼Œç¡®ä¿åªæœ‰å·²ç™»å½•ç”¨æˆ·æ‰èƒ½è®¿é—®ä¸»åº”ç”¨ã€‚`App.vue`é€šè¿‡`currentViewComponent`è®¡ç®—å±æ€§ï¼ŒåŸºäºå½“å‰è§†å›¾æ ‡è¯†åŠ¨æ€æ¸²æŸ“å¯¹åº”çš„è§†å›¾ç»„ä»¶ï¼ˆå¦‚`Cultivation`ã€`Alchemy`ç­‰ï¼‰ï¼Œå®ç°äº†å•é¡µåº”ç”¨çš„è§†å›¾åˆ‡æ¢ã€‚

```mermaid
graph TD
A[App.vue] --> B[é¡µé¢å¸ƒå±€]
A --> C[çŠ¶æ€ç®¡ç†]
A --> D[WebSocketè¿æ¥]
A --> E[è§†å›¾æ¸²æŸ“]
B --> F[n-layoutç»“æ„]
C --> G[Pinia Stores]
D --> H[useWebSocket]
E --> I[åŠ¨æ€ç»„ä»¶]
I --> J[Cultivation.vue]
I --> K[Alchemy.vue]
I --> L[Gacha.vue]
```

**å›¾ç¤ºæ¥æº**
- [App.vue](file://src/App.vue)
- [router/index.js](file://src/router/index.js)

**ç« èŠ‚æ¥æº**
- [App.vue](file://src/App.vue#L1-L654)
- [router/index.js](file://src/router/index.js#L1-L37)

## åŠŸèƒ½æ ‡ç­¾é¡µç»„ä»¶åˆ†æ

åŠŸèƒ½æ ‡ç­¾é¡µç»„ä»¶ï¼ˆå¦‚`EquipmentTab`ã€`PillsTab`ã€`PetsTab`ï¼‰æ˜¯æ¸¸æˆæ ¸å¿ƒåŠŸèƒ½çš„å…¥å£ï¼Œæ¯ä¸ªç»„ä»¶è´Ÿè´£ç®¡ç†ç‰¹å®šç±»å‹çš„æ¸¸æˆèµ„æºã€‚

`EquipmentTab`ç»„ä»¶é€šè¿‡ç½‘æ ¼å¸ƒå±€å±•ç¤ºç©å®¶å½“å‰è£…å¤‡çš„äº”ä»¶æ³•å®ï¼ˆæ³•å®ã€å† å·¾ã€é“è¢ã€äº‘å±¥ã€æœ¬å‘½æ³•å®ï¼‰ã€‚æ¯ä¸ªè£…å¤‡æ ¼å­æ˜¾ç¤ºè£…å¤‡åç§°å’Œæ“ä½œæŒ‰é’®ï¼Œç‚¹å‡»â€œæ›´å¤šâ€å¯æ‰“å¼€è£…å¤‡åˆ—è¡¨æ¨¡æ€æ¡†ã€‚è¯¥ç»„ä»¶é€šè¿‡propsæ¥æ”¶`equipmentStore`ã€`inventoryStore`ç­‰storeå®ä¾‹ï¼Œå®ç°äº†ä¸å…¨å±€çŠ¶æ€çš„æ·±åº¦é›†æˆã€‚ç»„ä»¶å†…éƒ¨é€šè¿‡`showEquipmentList`æ–¹æ³•ä»åç«¯è·å–æŒ‡å®šç±»å‹çš„è£…å¤‡åˆ—è¡¨ï¼Œå¹¶åœ¨æœ¬åœ°ç¼“å­˜ï¼Œé¿å…é‡å¤è¯·æ±‚ã€‚

`PillsTab`ç»„ä»¶é‡‡ç”¨ç®€æ´çš„ç½‘æ ¼å¸ƒå±€å±•ç¤ºç©å®¶æ‹¥æœ‰çš„ä¸¹è¯ã€‚å®ƒé€šè¿‡`groupedPills`è®¡ç®—å±æ€§å¯¹èƒŒåŒ…ä¸­çš„ä¸¹è¯è¿›è¡Œåˆ†ç»„è®¡æ•°ï¼Œç›¸åŒIDçš„ä¸¹è¯åˆå¹¶æ˜¾ç¤ºå¹¶æ ‡æ³¨æ•°é‡ã€‚ç”¨æˆ·ç‚¹å‡»â€œæœç”¨â€æŒ‰é’®æ—¶ï¼Œç»„ä»¶è°ƒç”¨`inventoryStore.useItem`æ–¹æ³•ï¼Œå§”æ‰˜`pillsStore`å¤„ç†ä¸¹è¯ä½¿ç”¨é€»è¾‘ï¼Œä½“ç°äº†èŒè´£åˆ†ç¦»çš„è®¾è®¡åŸåˆ™ã€‚

`PetsTab`ç»„ä»¶ç®¡ç†ç©å®¶çš„çµå® ï¼Œæ”¯æŒæŒ‰ç¨€æœ‰åº¦ç­›é€‰å’Œåˆ†é¡µæ˜¾ç¤ºã€‚ç»„ä»¶é€šè¿‡`filteredPets`è®¡ç®—å±æ€§å®ç°ç­›é€‰åŠŸèƒ½ï¼Œ`displayPets`è®¡ç®—å±æ€§å¤„ç†åˆ†é¡µé€»è¾‘ã€‚æ¯ä¸ªçµå® å¡ç‰‡æ˜¾ç¤ºåç§°ã€ç¨€æœ‰åº¦ã€ç­‰çº§å’Œæ˜Ÿçº§ï¼Œå¹¶æä¾›â€œå‡ºæˆ˜/å¬å›â€æŒ‰é’®ã€‚ç‚¹å‡»å¡ç‰‡å¯æŸ¥çœ‹çµå® è¯¦æƒ…ï¼ŒåŒ…æ‹¬è¯¦ç»†çš„å±æ€§åŠ æˆå’Œæˆ˜æ–—å±æ€§ã€‚

```mermaid
classDiagram
class EquipmentTab {
+equipmentTypes : Object
+equipmentQualities : Object
+showEquipmentList(type)
+showEquipmentDetails(equipment)
+equipItem(equipment)
+unequipItem(slot)
}
class PillsTab {
+groupedPills : Computed
+usePill(pill)
}
class PetsTab {
+petRarities : Object
+filteredPets : Computed
+displayPets : Computed
+showPetDetails(pet)
+upgradePet(pet)
+evolvePet(pet)
}
EquipmentTab --> "uses" inventoryStore
EquipmentTab --> "uses" equipmentStore
PillsTab --> "uses" inventoryStore
PillsTab --> "delegates to" pillsStore
PetsTab --> "uses" petsStore
PetsTab --> "uses" playerInfoStore
```

**å›¾ç¤ºæ¥æº**
- [components/EquipmentTab.vue](file://src/components/EquipmentTab.vue)
- [components/PillsTab.vue](file://src/components/PillsTab.vue)
- [components/PetsTab.vue](file://src/components/PetsTab.vue)

**ç« èŠ‚æ¥æº**
- [components/EquipmentTab.vue](file://src/components/EquipmentTab.vue#L1-L739)
- [components/PillsTab.vue](file://src/components/PillsTab.vue#L1-L72)
- [components/PetsTab.vue](file://src/components/PetsTab.vue#L1-L608)

## æ—¥å¿—é¢æ¿æœºåˆ¶

`LogPanel`ç»„ä»¶æ˜¯æ¸¸æˆå†…ä¿¡æ¯åé¦ˆçš„æ ¸å¿ƒï¼Œè´Ÿè´£å±•ç¤ºç³»ç»Ÿæ—¥å¿—å’Œæ“ä½œåé¦ˆã€‚è¯¥ç»„ä»¶é‡‡ç”¨Web WorkeræŠ€æœ¯å®ç°æ—¥å¿—å¤„ç†çš„å¼‚æ­¥åŒ–ï¼Œå°†æ—¥å¿—çš„å­˜å‚¨ã€æ ¼å¼åŒ–å’Œæ»šåŠ¨é€»è¾‘ç§»è‡³ç‹¬ç«‹çº¿ç¨‹ï¼Œé¿å…å¤§é‡æ—¥å¿—è¾“å‡ºæ—¶é˜»å¡ä¸»çº¿ç¨‹ï¼Œä¿è¯äº†UIçš„æµç•…æ€§ã€‚

ç»„ä»¶é€šè¿‡`addLog`æ–¹æ³•æ¥æ”¶æ—¥å¿—å†…å®¹ï¼Œè¯¥æ–¹æ³•å°†æ—¥å¿—æ•°æ®é€šè¿‡`postMessage`å‘é€ç»™Workerã€‚Workerè´Ÿè´£ç”Ÿæˆæ—¶é—´æˆ³ã€ç®¡ç†æ—¥å¿—é˜Ÿåˆ—ï¼Œå¹¶åœ¨æ—¥å¿—æ›´æ–°æ—¶é€šçŸ¥ä¸»çº¿ç¨‹ã€‚ç»„ä»¶é€šè¿‡`scrollRef`å¼•ç”¨ï¼Œåœ¨æ—¥å¿—æ›´æ–°åè‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨ï¼Œç¡®ä¿æœ€æ–°æ—¥å¿—å§‹ç»ˆå¯è§ã€‚æ—¥å¿—æ¡ç›®ä½¿ç”¨`n-tag`ç»„ä»¶æ˜¾ç¤ºæ—¶é—´æˆ³ï¼Œ`n-gradient-text`ç»„ä»¶æ˜¾ç¤ºå†…å®¹ï¼Œä¸åŒç±»å‹çš„æ—¥å¿—ï¼ˆå¦‚æˆåŠŸã€é”™è¯¯ï¼‰ä½¿ç”¨ä¸åŒé¢œè‰²åŒºåˆ†ã€‚

`LogPanel`è¢«å¹¿æ³›é›†æˆåˆ°å…¶ä»–åŠŸèƒ½ç»„ä»¶ä¸­ï¼Œå¦‚`Cultivation.vue`å’Œ`Alchemy.vue`ï¼Œé€šè¿‡`ref`å¼•ç”¨è°ƒç”¨å…¶`addLog`æ–¹æ³•ï¼Œå®ç°äº†æ—¥å¿—åŠŸèƒ½çš„å¤ç”¨ã€‚è¿™ç§è®¾è®¡æ¨¡å¼å°†æ—¥å¿—å±•ç¤ºé€»è¾‘ä¸ä¸šåŠ¡é€»è¾‘è§£è€¦ï¼Œæé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚

```mermaid
sequenceDiagram
participant Component as åŠŸèƒ½ç»„ä»¶
participant LogPanel as LogPanel
participant Worker as LogWorker
Component->>LogPanel : addLog(type, content)
LogPanel->>Worker : postMessage({type : 'ADD_LOG', data})
Worker->>Worker : å¤„ç†æ—¥å¿—(æ·»åŠ æ—¶é—´æˆ³, æ›´æ–°é˜Ÿåˆ—)
Worker->>LogPanel : postMessage({type : 'LOGS_UPDATED', logs})
LogPanel->>LogPanel : æ›´æ–°logsæ•°ç»„
LogPanel->>LogPanel : æ»šåŠ¨åˆ°åº•éƒ¨
```

**å›¾ç¤ºæ¥æº**
- [components/LogPanel.vue](file://src/components/LogPanel.vue)

**ç« èŠ‚æ¥æº**
- [components/LogPanel.vue](file://src/components/LogPanel.vue#L1-L132)

## æŠ½å¥–ç³»ç»Ÿç»„ä»¶æ ‘

æŠ½å¥–ç³»ç»Ÿé‡‡ç”¨æ¸…æ™°çš„ç»„ä»¶æ ‘ç»“æ„ï¼Œä»¥`GachaMain`ä¸ºæ ¹ç»„ä»¶ï¼Œåè°ƒå¤šä¸ªå­ç»„ä»¶å…±åŒå®ŒæˆæŠ½å¥–æµç¨‹ã€‚

`GachaMain.vue`ä½œä¸ºå®¹å™¨ç»„ä»¶ï¼Œç®¡ç†æŠ½å¥–çš„æ ¸å¿ƒçŠ¶æ€ï¼ˆå¦‚`gachaType`ã€`gachaNumber`ï¼‰å’Œä¸šåŠ¡é€»è¾‘ã€‚å®ƒé€šè¿‡`useGachaStore`è®¿é—®å…¨å±€æŠ½å¥–çŠ¶æ€ï¼Œå¹¶é€šè¿‡`performGacha`æ–¹æ³•å¤„ç†æŠ½å¡è¯·æ±‚ã€‚è¯¥æ–¹æ³•é¦–å…ˆè°ƒç”¨åç«¯APIæ‰§è¡ŒæŠ½å¡ï¼Œç„¶åè§¦å‘æŠ½å¡åŠ¨ç”»ï¼ˆæ‘‡æ™ƒå’Œå¼€å¯ï¼‰ï¼Œæœ€åå°†ç»“æœå­˜å…¥`gachaStore`å¹¶æ‰“å¼€ç»“æœæ¨¡æ€æ¡†ã€‚

`GachaCard`ç»„ä»¶æ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„å±•ç¤ºç»„ä»¶ï¼Œä»…æ¥æ”¶`isShaking`å’Œ`isOpening`ç­‰å¸ƒå°”å€¼propsï¼Œé€šè¿‡CSSç±»æ§åˆ¶åŠ¨ç”»æ•ˆæœã€‚å®ƒä½¿ç”¨ç®€å•çš„è¡¨æƒ…ç¬¦å·ï¼ˆğŸ¥‹ä»£è¡¨è£…å¤‡ï¼ŒğŸ¥šä»£è¡¨çµå® ï¼‰ä½œä¸ºè§†è§‰å…ƒç´ ï¼Œé€šè¿‡`shake`å’Œ`open`CSSç±»å®ç°æ‘‡æ™ƒå’Œå˜è‰²åŠ¨ç”»ã€‚

`ResultGrid`ç»„ä»¶è´Ÿè´£å±•ç¤ºæŠ½å¡ç»“æœï¼Œå®ƒæ¥æ”¶`currentPageResults`ç­‰propsï¼Œé€šè¿‡ç½‘æ ¼å¸ƒå±€æ¸²æŸ“ç‰©å“åˆ—è¡¨ã€‚å¯¹äºç¬¦åˆå¿ƒæ„¿å•æ¡ä»¶çš„ç‰©å“ï¼Œä¼šæ·»åŠ `wish-bonus`ç±»ï¼Œæ˜¾ç¤ºæ—‹è½¬çš„æ˜Ÿæ˜Ÿç‰¹æ•ˆã€‚æ¯ä¸ªç‰©å“å¡ç‰‡éƒ½åŒ…å«ä¸€ä¸ªè¯¦æƒ…æŒ‰é’®ï¼Œç‚¹å‡»åé€šè¿‡`emit`è§¦å‘äº‹ä»¶ï¼Œç”±çˆ¶ç»„ä»¶`GachaMain`å¤„ç†å¹¶æ‰“å¼€ç›¸åº”çš„è¯¦æƒ…æ¨¡æ€æ¡†ã€‚

```mermaid
graph TD
A[GachaMain] --> B[GachaCard]
A --> C[GachaButtons]
A --> D[GachaResultModal]
A --> E[ProbabilityInfoModal]
A --> F[WishlistSettingsModal]
A --> G[AutoSettingsModal]
A --> H[PetDetailModal]
A --> I[EquipmentDetailModal]
D --> J[ResultGrid]
J --> K[PetDetailModal]
J --> L[EquipmentDetailModal]
C --> A
J --> A
```

**å›¾ç¤ºæ¥æº**
- [components/gacha/GachaMain.vue](file://src/components/gacha/GachaMain.vue)
- [components/gacha/GachaCard.vue](file://src/components/gacha/GachaCard.vue)
- [components/gacha/ResultGrid.vue](file://src/components/gacha/ResultGrid.vue)

**ç« èŠ‚æ¥æº**
- [components/gacha/GachaMain.vue](file://src/components/gacha/GachaMain.vue#L1-L426)
- [components/gacha/GachaCard.vue](file://src/components/gacha/GachaCard.vue#L1-L87)
- [components/gacha/ResultGrid.vue](file://src/components/gacha/ResultGrid.vue#L1-L145)

## æ¨¡æ€æ¡†å¤ç”¨è®¾è®¡

æ¨¡æ€æ¡†ç»„ä»¶ï¼ˆå¦‚`EquipmentDetailModal`ã€`PetDetailModal`ï¼‰é‡‡ç”¨é«˜åº¦å¤ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œé€šè¿‡propsæ¥æ”¶æ•°æ®ï¼Œé€šè¿‡`v-model`å®ç°åŒå‘ç»‘å®šï¼Œå®ç°äº†åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­çš„çµæ´»ä½¿ç”¨ã€‚

`EquipmentDetailModal`å’Œ`PetDetailModal`éƒ½ä½¿ç”¨`n-modal`ç»„ä»¶ä½œä¸ºåŸºç¡€ï¼Œé€šè¿‡`v-model:show`ç»‘å®šæ˜¾ç¤ºçŠ¶æ€ã€‚å®ƒä»¬æ¥æ”¶`equipment`æˆ–`pet`å¯¹è±¡ä½œä¸ºpropsï¼Œä½¿ç”¨`n-descriptions`ç»„ä»¶ä»¥è¡¨æ ¼å½¢å¼å±•ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚ä¸¤ä¸ªç»„ä»¶éƒ½ä½¿ç”¨äº†è®¡ç®—å±æ€§`show`æ¥å¤„ç†`v-model`çš„åŒå‘ç»‘å®šï¼Œè¿™æ˜¯Vue 3ä¸­å®ç°è‡ªå®šä¹‰ç»„ä»¶v-modelçš„æ ‡å‡†åšæ³•ã€‚

è¿™äº›æ¨¡æ€æ¡†åœ¨å¤šä¸ªåœ°æ–¹è¢«å¤ç”¨ï¼šåœ¨`EquipmentTab`ä¸­ç”¨äºæŸ¥çœ‹å·²è£…å¤‡ç‰©å“çš„è¯¦æƒ…ï¼Œåœ¨`GachaResultModal`ä¸­ç”¨äºæŸ¥çœ‹æŠ½å¡è·å¾—çš„æ–°ç‰©å“ã€‚è¿™ç§è®¾è®¡é¿å…äº†ä»£ç é‡å¤ï¼Œç¡®ä¿äº†ä¿¡æ¯å±•ç¤ºçš„ä¸€è‡´æ€§ã€‚ç»„ä»¶é€šè¿‡`defineProps`æ˜ç¡®å£°æ˜äº†æ‰€éœ€çš„propsç±»å‹å’Œé»˜è®¤å€¼ï¼Œå¢å¼ºäº†ä»£ç çš„å¯è¯»æ€§å’Œå¥å£®æ€§ã€‚

```mermaid
classDiagram
class EquipmentDetailModal {
+show : Boolean
+equipment : Object
+equipmentTypes : Object
-show : Computed
+hasExtraAttributes()
+getAttributeLabel()
}
class PetDetailModal {
+show : Boolean
+pet : Object
+petRarities : Object
-show : Computed
+getPetBonus()
}
EquipmentDetailModal --> "uses" n-modal
EquipmentDetailModal --> "uses" n-descriptions
PetDetailModal --> "uses" n-modal
PetDetailModal --> "uses" n-descriptions
PetDetailModal --> "uses" n-collapse
```

**å›¾ç¤ºæ¥æº**
- [components/gacha/EquipmentDetailModal.vue](file://src/components/gacha/EquipmentDetailModal.vue)
- [components/gacha/PetDetailModal.vue](file://src/components/gacha/PetDetailModal.vue)

**ç« èŠ‚æ¥æº**
- [components/gacha/EquipmentDetailModal.vue](file://src/components/gacha/EquipmentDetailModal.vue#L1-L73)
- [components/gacha/PetDetailModal.vue](file://src/components/gacha/PetDetailModal.vue#L1-L153)

## æ ¸å¿ƒVueç‰¹æ€§åº”ç”¨

æœ¬é¡¹ç›®æ·±å…¥åº”ç”¨äº†Vue 3çš„æ ¸å¿ƒç‰¹æ€§ï¼ŒåŒ…æ‹¬ç»„åˆå¼APIã€å“åº”å¼ç³»ç»Ÿã€ç»„ä»¶é€šä¿¡å’ŒçŠ¶æ€ç®¡ç†ã€‚

**Propsä¼ é€’ä¸äº‹ä»¶å‘å°„**ï¼šç»„ä»¶é—´é€šä¿¡éµå¾ªå•å‘æ•°æ®æµåŸåˆ™ã€‚çˆ¶ç»„ä»¶é€šè¿‡propså‘ä¸‹ä¼ é€’æ•°æ®ï¼Œå­ç»„ä»¶é€šè¿‡`emit`å‘ä¸Šå‘å°„äº‹ä»¶ã€‚ä¾‹å¦‚ï¼Œ`GachaButtons`ç»„ä»¶é€šè¿‡`@gacha`ç›‘å¬æŠ½å¡äº‹ä»¶ï¼Œ`ResultGrid`é€šè¿‡`@show-pet-detail`å‘å°„äº‹ä»¶ï¼Œå‡ç”±`GachaMain`ç»„ä»¶å¤„ç†ã€‚

**æ’æ§½ä½¿ç”¨**ï¼šé¡¹ç›®ä¸­å¤§é‡ä½¿ç”¨äº†`n-card`ã€`n-modal`ç­‰ç¬¬ä¸‰æ–¹ç»„ä»¶çš„æ’æ§½åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œ`n-card`çš„`#header`å’Œ`#footer`æ’æ§½ç”¨äºè‡ªå®šä¹‰å¡ç‰‡å¤´éƒ¨å’Œåº•éƒ¨å†…å®¹ï¼Œ`n-modal`çš„`#action`æ’æ§½ç”¨äºæ”¾ç½®æ“ä½œæŒ‰é’®ï¼Œå®ç°äº†çµæ´»çš„UIå®šåˆ¶ã€‚

**çŠ¶æ€ç®¡ç†**ï¼šé‡‡ç”¨Piniaä½œä¸ºçŠ¶æ€ç®¡ç†åº“ï¼Œå°†åº”ç”¨çŠ¶æ€ï¼ˆå¦‚ç©å®¶ä¿¡æ¯ã€èƒŒåŒ…ç‰©å“ã€æŠ½å¥–è®¾ç½®ï¼‰é›†ä¸­ç®¡ç†ã€‚`gachaStore`å’Œ`inventoryStore`ç­‰storeé€šè¿‡`defineStore`å®šä¹‰ï¼Œä½¿ç”¨`state`ã€`actions`å’Œ`getters`ç»„ç»‡é€»è¾‘ã€‚ç»„ä»¶é€šè¿‡`useStore`å‡½æ•°å¯¼å…¥storeï¼Œå®ç°äº†çŠ¶æ€çš„å…¨å±€è®¿é—®å’Œå“åº”å¼æ›´æ–°ã€‚

```mermaid
flowchart TD
A[ç»„åˆå¼API] --> B[setup()]
A --> C[ref()]
A --> D[computed()]
A --> E[watch()]
F[å“åº”å¼ç³»ç»Ÿ] --> G[Proxy]
F --> H[ä¾èµ–è¿½è¸ª]
I[ç»„ä»¶é€šä¿¡] --> J[Props]
I --> K[Events]
I --> L[Slots]
M[çŠ¶æ€ç®¡ç†] --> N[Pinia]
N --> O[State]
N --> P[Actions]
N --> Q[Getters]
```

**å›¾ç¤ºæ¥æº**
- [stores/gacha.js](file://src/stores/gacha.js)
- [stores/inventory.js](file://src/stores/inventory.js)

**ç« èŠ‚æ¥æº**
- [stores/gacha.js](file://src/stores/gacha.js#L1-L150)
- [stores/inventory.js](file://src/stores/inventory.js#L1-L54)